<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.1.1 (20250719.2154)
 -->
<!-- Title: APIRequestFlow Pages: 1 -->
<svg width="1277pt" height="1466pt"
 viewBox="0.00 0.00 1277.00 1466.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1462)">
<title>APIRequestFlow</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1462 1272.88,-1462 1272.88,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-162.5" font-family="Times,serif" font-size="10.00">🔄 API Request Flow</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-136.25" font-family="Times,serif" font-size="10.00">📍 Key Points:</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-122" font-family="Times,serif" font-size="10.00">• Middleware chain processes all requests</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-110.75" font-family="Times,serif" font-size="10.00">• Structured error handling at every layer</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-99.5" font-family="Times,serif" font-size="10.00">• Domain models never leave the service layer</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-88.25" font-family="Times,serif" font-size="10.00">• DTOs provide stable API contract</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-77" font-family="Times,serif" font-size="10.00">• Repository pattern abstracts data access</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-53.75" font-family="Times,serif" font-size="10.00">⚡ Performance:</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-39.5" font-family="Times,serif" font-size="10.00">• Connection pooling (pgx)</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-28.25" font-family="Times,serif" font-size="10.00">• Structured logging (minimal overhead)</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-17" font-family="Times,serif" font-size="10.00">• Efficient JSON serialization</text>
<text xml:space="preserve" text-anchor="middle" x="634.44" y="-5.75" font-family="Times,serif" font-size="10.00">• Database indexing for fast queries</text>
<g id="clust1" class="cluster">
<title>cluster_operations</title>
<polygon fill="lavender" stroke="black" points="110.25,-1212 110.25,-1294.25 1111.25,-1294.25 1111.25,-1212 110.25,-1212"/>
<text xml:space="preserve" text-anchor="middle" x="610.75" y="-1276.95" font-family="Times,serif" font-size="14.00">🔄 Supported Operations</text>
</g>
<!-- client -->
<g id="node1" class="node">
<title>client</title>
<polygon fill="lightblue" stroke="black" points="172.88,-1458 7.62,-1458 7.62,-1415.5 172.88,-1415.5 172.88,-1458"/>
<text xml:space="preserve" text-anchor="middle" x="90.25" y="-1440.7" font-family="Arial" font-size="14.00">📱 HTTP Client</text>
<text xml:space="preserve" text-anchor="middle" x="90.25" y="-1421.95" font-family="Arial" font-size="14.00">(curl, Postman, Browser)</text>
</g>
<!-- gin_router -->
<g id="node2" class="node">
<title>gin_router</title>
<polygon fill="lightcyan" stroke="black" points="638.38,-1363.75 518.12,-1363.75 518.12,-1321.25 638.38,-1321.25 638.38,-1363.75"/>
<text xml:space="preserve" text-anchor="middle" x="578.25" y="-1346.45" font-family="Arial" font-size="14.00">🌐 Gin Router</text>
<text xml:space="preserve" text-anchor="middle" x="578.25" y="-1327.7" font-family="Arial" font-size="14.00">(Route Matching)</text>
</g>
<!-- client&#45;&gt;gin_router -->
<g id="edge1" class="edge">
<title>client&#45;&gt;gin_router</title>
<path fill="none" stroke="black" d="M173.31,-1420.05C267.01,-1402.34 417.88,-1373.82 506.61,-1357.04"/>
<polygon fill="black" stroke="black" points="507.25,-1360.48 516.42,-1355.19 505.95,-1353.61 507.25,-1360.48"/>
<text xml:space="preserve" text-anchor="middle" x="445.22" y="-1384.2" font-family="Arial" font-size="14.00">POST /api/v1/subscriptions</text>
</g>
<!-- cors_middleware -->
<g id="node3" class="node">
<title>cors_middleware</title>
<polygon fill="lightcyan" stroke="black" points="1268.88,-1261 1121.62,-1261 1121.62,-1218.5 1268.88,-1218.5 1268.88,-1261"/>
<text xml:space="preserve" text-anchor="middle" x="1195.25" y="-1243.7" font-family="Arial" font-size="14.00">🔀 CORS Middleware</text>
<text xml:space="preserve" text-anchor="middle" x="1195.25" y="-1224.95" font-family="Arial" font-size="14.00">(Cross&#45;Origin)</text>
</g>
<!-- gin_router&#45;&gt;cors_middleware -->
<g id="edge2" class="edge">
<title>gin_router&#45;&gt;cors_middleware</title>
<path fill="none" stroke="black" d="M638.66,-1339.95C759.92,-1336.23 1028.74,-1324.72 1115.25,-1294.25 1132.02,-1288.34 1148.68,-1278.1 1162.41,-1268.15"/>
<polygon fill="black" stroke="black" points="1164.33,-1271.08 1170.21,-1262.27 1160.12,-1265.49 1164.33,-1271.08"/>
</g>
<!-- create_op -->
<g id="node20" class="node">
<title>create_op</title>
<polygon fill="white" stroke="black" points="565.12,-1259.5 425.38,-1259.5 425.38,-1220 565.12,-1220 565.12,-1259.5"/>
<text xml:space="preserve" text-anchor="middle" x="495.25" y="-1242.2" font-family="Arial" font-size="14.00">POST /subscriptions</text>
<text xml:space="preserve" text-anchor="middle" x="495.25" y="-1226.45" font-family="Arial" font-size="14.00">(Create)</text>
</g>
<!-- gin_router&#45;&gt;create_op -->
<g id="edge29" class="edge">
<title>gin_router&#45;&gt;create_op</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M561.45,-1321.11C548.98,-1305.98 531.84,-1285.16 518.12,-1268.51"/>
<polygon fill="black" stroke="black" points="520.92,-1266.41 511.86,-1260.91 515.52,-1270.86 520.92,-1266.41"/>
</g>
<!-- read_op -->
<g id="node21" class="node">
<title>read_op</title>
<polygon fill="white" stroke="black" points="737.25,-1259.5 583.25,-1259.5 583.25,-1220 737.25,-1220 737.25,-1259.5"/>
<text xml:space="preserve" text-anchor="middle" x="660.25" y="-1242.2" font-family="Arial" font-size="14.00">GET /subscriptions/{id}</text>
<text xml:space="preserve" text-anchor="middle" x="660.25" y="-1226.45" font-family="Arial" font-size="14.00">(Read)</text>
</g>
<!-- gin_router&#45;&gt;read_op -->
<g id="edge30" class="edge">
<title>gin_router&#45;&gt;read_op</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M594.84,-1321.11C607.16,-1305.98 624.11,-1285.16 637.66,-1268.51"/>
<polygon fill="black" stroke="black" points="640.24,-1270.88 643.83,-1260.92 634.81,-1266.47 640.24,-1270.88"/>
</g>
<!-- update_op -->
<g id="node22" class="node">
<title>update_op</title>
<polygon fill="white" stroke="black" points="907.5,-1259.5 755,-1259.5 755,-1220 907.5,-1220 907.5,-1259.5"/>
<text xml:space="preserve" text-anchor="middle" x="831.25" y="-1242.2" font-family="Arial" font-size="14.00">PUT /subscriptions/{id}</text>
<text xml:space="preserve" text-anchor="middle" x="831.25" y="-1226.45" font-family="Arial" font-size="14.00">(Update)</text>
</g>
<!-- gin_router&#45;&gt;update_op -->
<g id="edge31" class="edge">
<title>gin_router&#45;&gt;update_op</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M638.8,-1328.93C671.43,-1321.06 711.91,-1309.5 746.25,-1294.25 763.37,-1286.64 781.1,-1276 795.9,-1266.2"/>
<polygon fill="black" stroke="black" points="797.6,-1269.28 803.92,-1260.78 793.68,-1263.48 797.6,-1269.28"/>
</g>
<!-- delete_op -->
<g id="node23" class="node">
<title>delete_op</title>
<polygon fill="white" stroke="black" points="1103.25,-1259.5 925.25,-1259.5 925.25,-1220 1103.25,-1220 1103.25,-1259.5"/>
<text xml:space="preserve" text-anchor="middle" x="1014.25" y="-1242.2" font-family="Arial" font-size="14.00">DELETE /subscriptions/{id}</text>
<text xml:space="preserve" text-anchor="middle" x="1014.25" y="-1226.45" font-family="Arial" font-size="14.00">(Delete)</text>
</g>
<!-- gin_router&#45;&gt;delete_op -->
<g id="edge32" class="edge">
<title>gin_router&#45;&gt;delete_op</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M638.65,-1339.58C707.43,-1335.92 822.44,-1325.26 916.25,-1294.25 937.21,-1287.32 958.92,-1275.96 976.57,-1265.49"/>
<polygon fill="black" stroke="black" points="977.9,-1268.78 984.62,-1260.59 974.26,-1262.8 977.9,-1268.78"/>
</g>
<!-- list_op -->
<g id="node24" class="node">
<title>list_op</title>
<polygon fill="white" stroke="black" points="248.62,-1259.5 117.88,-1259.5 117.88,-1220 248.62,-1220 248.62,-1259.5"/>
<text xml:space="preserve" text-anchor="middle" x="183.25" y="-1242.2" font-family="Arial" font-size="14.00">GET /subscriptions</text>
<text xml:space="preserve" text-anchor="middle" x="183.25" y="-1226.45" font-family="Arial" font-size="14.00">(List + Filter)</text>
</g>
<!-- gin_router&#45;&gt;list_op -->
<g id="edge33" class="edge">
<title>gin_router&#45;&gt;list_op</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M517.67,-1340.94C451.63,-1338.44 343.93,-1328.78 258.25,-1294.25 242.13,-1287.76 226.19,-1277.14 213.18,-1267.07"/>
<polygon fill="black" stroke="black" points="215.42,-1264.38 205.43,-1260.85 211.04,-1269.84 215.42,-1264.38"/>
</g>
<!-- cost_op -->
<g id="node25" class="node">
<title>cost_op</title>
<polygon fill="white" stroke="black" points="407.5,-1259.5 267,-1259.5 267,-1220 407.5,-1220 407.5,-1259.5"/>
<text xml:space="preserve" text-anchor="middle" x="337.25" y="-1242.2" font-family="Arial" font-size="14.00">GET /costs/calculate</text>
<text xml:space="preserve" text-anchor="middle" x="337.25" y="-1226.45" font-family="Arial" font-size="14.00">(Aggregation)</text>
</g>
<!-- gin_router&#45;&gt;cost_op -->
<g id="edge34" class="edge">
<title>gin_router&#45;&gt;cost_op</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M517.76,-1328.62C486.59,-1320.81 448.46,-1309.4 416.25,-1294.25 400.3,-1286.75 383.95,-1276.24 370.3,-1266.51"/>
<polygon fill="black" stroke="black" points="372.68,-1263.92 362.54,-1260.85 368.55,-1269.57 372.68,-1263.92"/>
</g>
<!-- logger_middleware -->
<g id="node4" class="node">
<title>logger_middleware</title>
<polygon fill="lightcyan" stroke="black" points="404,-1166.75 254.5,-1166.75 254.5,-1124.25 404,-1124.25 404,-1166.75"/>
<text xml:space="preserve" text-anchor="middle" x="329.25" y="-1149.45" font-family="Arial" font-size="14.00">📝 Logger Middleware</text>
<text xml:space="preserve" text-anchor="middle" x="329.25" y="-1130.7" font-family="Arial" font-size="14.00">(Request Logging)</text>
</g>
<!-- cors_middleware&#45;&gt;logger_middleware -->
<g id="edge3" class="edge">
<title>cors_middleware&#45;&gt;logger_middleware</title>
<path fill="none" stroke="black" d="M1138.9,-1218.05C1131.03,-1215.71 1123,-1213.59 1115.25,-1212 864.85,-1160.48 561.65,-1149.27 415.83,-1146.97"/>
<polygon fill="black" stroke="black" points="415.89,-1143.48 405.84,-1146.83 415.79,-1150.47 415.89,-1143.48"/>
</g>
<!-- recovery_middleware -->
<g id="node5" class="node">
<title>recovery_middleware</title>
<polygon fill="lightcyan" stroke="black" points="404.5,-1072.5 240,-1072.5 240,-1030 404.5,-1030 404.5,-1072.5"/>
<text xml:space="preserve" text-anchor="middle" x="322.25" y="-1055.2" font-family="Arial" font-size="14.00">🛡️ Recovery Middleware</text>
<text xml:space="preserve" text-anchor="middle" x="322.25" y="-1036.45" font-family="Arial" font-size="14.00">(Panic Recovery)</text>
</g>
<!-- logger_middleware&#45;&gt;recovery_middleware -->
<g id="edge4" class="edge">
<title>logger_middleware&#45;&gt;recovery_middleware</title>
<path fill="none" stroke="black" d="M352.09,-1123.92C360.14,-1114.13 366.1,-1102.05 361.25,-1090.5 359.98,-1087.47 358.33,-1084.55 356.44,-1081.78"/>
<polygon fill="black" stroke="black" points="359.23,-1079.66 350.19,-1074.12 353.8,-1084.08 359.23,-1079.66"/>
</g>
<!-- logger_middleware&#45;&gt;recovery_middleware -->
<g id="edge28" class="edge">
<title>logger_middleware&#45;&gt;recovery_middleware</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M294.83,-1123.96C289.14,-1118.92 284.03,-1113 280.75,-1106.25 276.6,-1097.69 279.16,-1089.17 284.62,-1081.51"/>
<polygon fill="black" stroke="black" points="287.16,-1083.93 291.14,-1074.11 281.91,-1079.3 287.16,-1083.93"/>
<text xml:space="preserve" text-anchor="middle" x="319" y="-1092.95" font-family="Arial" font-size="14.00">Log Request</text>
</g>
<!-- subscription_handler -->
<g id="node7" class="node">
<title>subscription_handler</title>
<polygon fill="lightyellow" stroke="black" points="400.88,-993 241.62,-993 241.62,-950.5 400.88,-950.5 400.88,-993"/>
<text xml:space="preserve" text-anchor="middle" x="321.25" y="-975.7" font-family="Arial" font-size="14.00">🎯 Subscription Handler</text>
<text xml:space="preserve" text-anchor="middle" x="321.25" y="-956.95" font-family="Arial" font-size="14.00">(HTTP Controller)</text>
</g>
<!-- recovery_middleware&#45;&gt;subscription_handler -->
<g id="edge5" class="edge">
<title>recovery_middleware&#45;&gt;subscription_handler</title>
<path fill="none" stroke="black" d="M321.99,-1029.89C321.89,-1022.12 321.77,-1013.06 321.66,-1004.48"/>
<polygon fill="black" stroke="black" points="325.16,-1004.71 321.53,-994.76 318.16,-1004.8 325.16,-1004.71"/>
</g>
<!-- error_middleware -->
<g id="node6" class="node">
<title>error_middleware</title>
<polygon fill="lightcyan" stroke="black" points="281,-298 143.5,-298 143.5,-255.5 281,-255.5 281,-298"/>
<text xml:space="preserve" text-anchor="middle" x="212.25" y="-280.7" font-family="Arial" font-size="14.00">❌ Error Middleware</text>
<text xml:space="preserve" text-anchor="middle" x="212.25" y="-261.95" font-family="Arial" font-size="14.00">(Error Handling)</text>
</g>
<!-- error_middleware&#45;&gt;logger_middleware -->
<g id="edge27" class="edge">
<title>error_middleware&#45;&gt;logger_middleware</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M212.25,-298.47C212.25,-314.08 212.25,-336.01 212.25,-355.25 212.25,-1052.25 212.25,-1052.25 212.25,-1052.25 212.25,-1082.07 235.97,-1103.74 262.05,-1118.55"/>
<polygon fill="black" stroke="black" points="260.31,-1121.59 270.78,-1123.18 263.59,-1115.4 260.31,-1121.59"/>
<text xml:space="preserve" text-anchor="middle" x="240.38" y="-713.08" font-family="Arial" font-size="14.00">Log Error</text>
</g>
<!-- error_response -->
<g id="node19" class="node">
<title>error_response</title>
<polygon fill="pink" stroke="black" points="128.5,-218.5 0,-218.5 0,-176 128.5,-176 128.5,-218.5"/>
<text xml:space="preserve" text-anchor="middle" x="64.25" y="-201.2" font-family="Arial" font-size="14.00">❌ Error Response</text>
<text xml:space="preserve" text-anchor="middle" x="64.25" y="-182.45" font-family="Arial" font-size="14.00">(JSON Error)</text>
</g>
<!-- error_middleware&#45;&gt;error_response -->
<g id="edge25" class="edge">
<title>error_middleware&#45;&gt;error_response</title>
<path fill="none" stroke="red" d="M172.98,-255.18C154.83,-245.68 133.08,-234.29 113.82,-224.21"/>
<polygon fill="red" stroke="red" points="115.53,-221.15 105.05,-219.61 112.28,-227.35 115.53,-221.15"/>
</g>
<!-- subscription_handler&#45;&gt;client -->
<g id="edge20" class="edge">
<title>subscription_handler&#45;&gt;client</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M241.43,-984.17C174.66,-996.04 90.25,-1017.52 90.25,-1050.25 90.25,-1343.5 90.25,-1343.5 90.25,-1343.5 90.25,-1363.54 90.25,-1386.03 90.25,-1403.78"/>
<polygon fill="green" stroke="green" points="86.75,-1403.72 90.25,-1413.72 93.75,-1403.72 86.75,-1403.72"/>
<text xml:space="preserve" text-anchor="middle" x="153.62" y="-1187.2" font-family="Arial" font-size="14.00">201 Created + JSON</text>
</g>
<!-- dto_binding -->
<g id="node8" class="node">
<title>dto_binding</title>
<polygon fill="lightyellow" stroke="black" points="554.75,-913.5 421.75,-913.5 421.75,-871 554.75,-871 554.75,-913.5"/>
<text xml:space="preserve" text-anchor="middle" x="488.25" y="-896.2" font-family="Arial" font-size="14.00">📋 Request Binding</text>
<text xml:space="preserve" text-anchor="middle" x="488.25" y="-877.45" font-family="Arial" font-size="14.00">(JSON → DTO)</text>
</g>
<!-- subscription_handler&#45;&gt;dto_binding -->
<g id="edge6" class="edge">
<title>subscription_handler&#45;&gt;dto_binding</title>
<path fill="none" stroke="black" d="M365.56,-950.18C386.42,-940.51 411.49,-928.87 433.52,-918.65"/>
<polygon fill="black" stroke="black" points="434.76,-921.93 442.36,-914.55 431.81,-915.58 434.76,-921.93"/>
</g>
<!-- validation -->
<g id="node9" class="node">
<title>validation</title>
<polygon fill="lightyellow" stroke="black" points="646.12,-834 506.38,-834 506.38,-791.5 646.12,-791.5 646.12,-834"/>
<text xml:space="preserve" text-anchor="middle" x="576.25" y="-816.7" font-family="Arial" font-size="14.00">✅ Input Validation</text>
<text xml:space="preserve" text-anchor="middle" x="576.25" y="-797.95" font-family="Arial" font-size="14.00">(Format &amp; Business)</text>
</g>
<!-- dto_binding&#45;&gt;validation -->
<g id="edge7" class="edge">
<title>dto_binding&#45;&gt;validation</title>
<path fill="none" stroke="black" d="M511.37,-870.89C521.5,-861.97 533.54,-851.36 544.49,-841.72"/>
<polygon fill="black" stroke="black" points="546.65,-844.48 551.84,-835.25 542.02,-839.23 546.65,-844.48"/>
</g>
<!-- subscription_service -->
<g id="node10" class="node">
<title>subscription_service</title>
<polygon fill="lightgreen" stroke="black" points="654.75,-739.75 497.75,-739.75 497.75,-697.25 654.75,-697.25 654.75,-739.75"/>
<text xml:space="preserve" text-anchor="middle" x="576.25" y="-722.45" font-family="Arial" font-size="14.00">⚙️ Subscription Service</text>
<text xml:space="preserve" text-anchor="middle" x="576.25" y="-703.7" font-family="Arial" font-size="14.00">(Business Logic)</text>
</g>
<!-- validation&#45;&gt;subscription_service -->
<g id="edge8" class="edge">
<title>validation&#45;&gt;subscription_service</title>
<path fill="none" stroke="black" d="M576.25,-791.28C576.25,-779.65 576.25,-764.84 576.25,-751.7"/>
<polygon fill="black" stroke="black" points="579.75,-751.75 576.25,-741.75 572.75,-751.75 579.75,-751.75"/>
<text xml:space="preserve" text-anchor="middle" x="638.12" y="-760.2" font-family="Arial" font-size="14.00">CreateSubscription()</text>
</g>
<!-- app_error -->
<g id="node18" class="node">
<title>app_error</title>
<polygon fill="pink" stroke="black" points="595.75,-377.5 474.75,-377.5 474.75,-335 595.75,-335 595.75,-377.5"/>
<text xml:space="preserve" text-anchor="middle" x="535.25" y="-360.2" font-family="Arial" font-size="14.00">⚠️ AppError</text>
<text xml:space="preserve" text-anchor="middle" x="535.25" y="-341.45" font-family="Arial" font-size="14.00">(Structured Error)</text>
</g>
<!-- validation&#45;&gt;app_error -->
<g id="edge21" class="edge">
<title>validation&#45;&gt;app_error</title>
<path fill="none" stroke="red" d="M646.38,-806.15C701.23,-797.48 768.25,-775.43 768.25,-719.5 768.25,-719.5 768.25,-719.5 768.25,-449.5 768.25,-414.42 675.78,-386.93 607.35,-371.39"/>
<polygon fill="red" stroke="red" points="608.16,-367.98 597.64,-369.23 606.64,-374.81 608.16,-367.98"/>
<text xml:space="preserve" text-anchor="middle" x="814.38" y="-586.45" font-family="Arial" font-size="14.00">Validation Error</text>
</g>
<!-- domain_validation -->
<g id="node11" class="node">
<title>domain_validation</title>
<polygon fill="lightgreen" stroke="black" points="648,-660.25 504.5,-660.25 504.5,-617.75 648,-617.75 648,-660.25"/>
<text xml:space="preserve" text-anchor="middle" x="576.25" y="-642.95" font-family="Arial" font-size="14.00">🔍 Domain Validation</text>
<text xml:space="preserve" text-anchor="middle" x="576.25" y="-624.2" font-family="Arial" font-size="14.00">(Business Rules)</text>
</g>
<!-- subscription_service&#45;&gt;domain_validation -->
<g id="edge9" class="edge">
<title>subscription_service&#45;&gt;domain_validation</title>
<path fill="none" stroke="black" d="M576.25,-697.14C576.25,-689.37 576.25,-680.31 576.25,-671.73"/>
<polygon fill="black" stroke="black" points="579.75,-672.01 576.25,-662.01 572.75,-672.01 579.75,-672.01"/>
</g>
<!-- mapper -->
<g id="node16" class="node">
<title>mapper</title>
<polygon fill="lightyellow" stroke="black" points="479.88,-660.25 356.62,-660.25 356.62,-617.75 479.88,-617.75 479.88,-660.25"/>
<text xml:space="preserve" text-anchor="middle" x="418.25" y="-642.95" font-family="Arial" font-size="14.00">🔄 Mapper</text>
<text xml:space="preserve" text-anchor="middle" x="418.25" y="-624.2" font-family="Arial" font-size="14.00">(Domain → DTO)</text>
</g>
<!-- subscription_service&#45;&gt;mapper -->
<g id="edge17" class="edge">
<title>subscription_service&#45;&gt;mapper</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M534.32,-696.93C514.77,-687.34 491.3,-675.83 470.6,-665.68"/>
<polygon fill="green" stroke="green" points="472.25,-662.59 461.73,-661.33 469.17,-668.87 472.25,-662.59"/>
</g>
<!-- subscription_repo -->
<g id="node12" class="node">
<title>subscription_repo</title>
<polygon fill="lightgray" stroke="black" points="562.5,-566 386,-566 386,-523.5 562.5,-523.5 562.5,-566"/>
<text xml:space="preserve" text-anchor="middle" x="474.25" y="-548.7" font-family="Arial" font-size="14.00">💾 Subscription Repository</text>
<text xml:space="preserve" text-anchor="middle" x="474.25" y="-529.95" font-family="Arial" font-size="14.00">(Data Access)</text>
</g>
<!-- domain_validation&#45;&gt;subscription_repo -->
<g id="edge10" class="edge">
<title>domain_validation&#45;&gt;subscription_repo</title>
<path fill="none" stroke="black" d="M548.2,-617.43C541.04,-611.88 533.48,-605.75 526.75,-599.75 517.97,-591.91 508.88,-582.91 500.77,-574.54"/>
<polygon fill="black" stroke="black" points="503.52,-572.35 494.09,-567.53 498.46,-577.18 503.52,-572.35"/>
<text xml:space="preserve" text-anchor="middle" x="551.5" y="-586.45" font-family="Arial" font-size="14.00">Create()</text>
</g>
<!-- domain_validation&#45;&gt;app_error -->
<g id="edge22" class="edge">
<title>domain_validation&#45;&gt;app_error</title>
<path fill="none" stroke="red" d="M578.33,-617.3C583.15,-566.13 593.41,-434.98 576.25,-395.5 574.86,-392.3 573.05,-389.25 570.98,-386.36"/>
<polygon fill="red" stroke="red" points="573.75,-384.21 564.58,-378.89 568.43,-388.76 573.75,-384.21"/>
<text xml:space="preserve" text-anchor="middle" x="645.72" y="-492.2" font-family="Arial" font-size="14.00">Business Rule Error</text>
</g>
<!-- sql_query -->
<g id="node13" class="node">
<title>sql_query</title>
<polygon fill="lightgray" stroke="black" points="525.75,-471.75 422.75,-471.75 422.75,-429.25 525.75,-429.25 525.75,-471.75"/>
<text xml:space="preserve" text-anchor="middle" x="474.25" y="-454.45" font-family="Arial" font-size="14.00">📊 SQL Query</text>
<text xml:space="preserve" text-anchor="middle" x="474.25" y="-435.7" font-family="Arial" font-size="14.00">(pgx Driver)</text>
</g>
<!-- subscription_repo&#45;&gt;sql_query -->
<g id="edge11" class="edge">
<title>subscription_repo&#45;&gt;sql_query</title>
<path fill="none" stroke="black" d="M468.53,-523.28C467.48,-511.65 467.23,-496.84 467.78,-483.7"/>
<polygon fill="black" stroke="black" points="471.27,-483.95 468.41,-473.75 464.29,-483.5 471.27,-483.95"/>
</g>
<!-- domain_model -->
<g id="node15" class="node">
<title>domain_model</title>
<polygon fill="lightcoral" stroke="black" points="740.5,-471.75 618,-471.75 618,-429.25 740.5,-429.25 740.5,-471.75"/>
<text xml:space="preserve" text-anchor="middle" x="679.25" y="-454.45" font-family="Arial" font-size="14.00">🏛️ Domain Model</text>
<text xml:space="preserve" text-anchor="middle" x="679.25" y="-435.7" font-family="Arial" font-size="14.00">(Business Entity)</text>
</g>
<!-- subscription_repo&#45;&gt;domain_model -->
<g id="edge15" class="edge">
<title>subscription_repo&#45;&gt;domain_model</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M506.51,-523.19C524.29,-512.38 547,-499.41 568.25,-489.75 580.5,-484.18 593.81,-478.94 606.83,-474.23"/>
<polygon fill="green" stroke="green" points="607.97,-477.54 616.23,-470.91 605.64,-470.94 607.97,-477.54"/>
</g>
<!-- sql_query&#45;&gt;subscription_repo -->
<g id="edge14" class="edge">
<title>sql_query&#45;&gt;subscription_repo</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M479.99,-472.24C481.03,-483.91 481.26,-498.73 480.71,-511.85"/>
<polygon fill="green" stroke="green" points="477.22,-511.56 480.07,-521.77 484.2,-512.01 477.22,-511.56"/>
</g>
<!-- postgres -->
<g id="node14" class="node">
<title>postgres</title>
<polygon fill="lightsteelblue" stroke="black" points="418.38,-377.5 310.12,-377.5 310.12,-335 418.38,-335 418.38,-377.5"/>
<text xml:space="preserve" text-anchor="middle" x="364.25" y="-360.2" font-family="Arial" font-size="14.00">🗄️ PostgreSQL</text>
<text xml:space="preserve" text-anchor="middle" x="364.25" y="-341.45" font-family="Arial" font-size="14.00">(Data Storage)</text>
</g>
<!-- sql_query&#45;&gt;postgres -->
<g id="edge12" class="edge">
<title>sql_query&#45;&gt;postgres</title>
<path fill="none" stroke="black" d="M422.39,-445.21C399.77,-440.46 375.25,-430.77 361.25,-411.25 356.69,-404.89 355.42,-396.95 355.77,-389.14"/>
<polygon fill="black" stroke="black" points="359.21,-389.85 357.07,-379.47 352.27,-388.92 359.21,-389.85"/>
</g>
<!-- sql_query&#45;&gt;app_error -->
<g id="edge23" class="edge">
<title>sql_query&#45;&gt;app_error</title>
<path fill="none" stroke="red" d="M474.78,-428.99C475.87,-418.33 478.54,-405.47 484.75,-395.5 486.94,-391.98 489.59,-388.67 492.5,-385.57"/>
<polygon fill="red" stroke="red" points="494.68,-388.33 499.61,-378.95 489.91,-383.21 494.68,-388.33"/>
<text xml:space="preserve" text-anchor="middle" x="530.5" y="-397.95" font-family="Arial" font-size="14.00">Database Error</text>
</g>
<!-- postgres&#45;&gt;sql_query -->
<g id="edge13" class="edge">
<title>postgres&#45;&gt;sql_query</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M372.32,-377.97C377.42,-388.96 384.93,-402.05 394.75,-411.25 400.16,-416.31 406.36,-420.83 412.87,-424.82"/>
<polygon fill="green" stroke="green" points="410.81,-427.68 421.24,-429.56 414.26,-421.59 410.81,-427.68"/>
<text xml:space="preserve" text-anchor="middle" x="434.5" y="-397.95" font-family="Arial" font-size="14.00">Row Inserted</text>
</g>
<!-- domain_model&#45;&gt;subscription_service -->
<g id="edge16" class="edge">
<title>domain_model&#45;&gt;subscription_service</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M699.48,-472.24C703.48,-477.55 707.1,-483.53 709.25,-489.75 711.54,-496.37 710.38,-498.59 709.25,-505.5 697.54,-577.11 700.57,-602.05 657.25,-660.25 648.57,-671.91 636.8,-682.11 624.93,-690.54"/>
<polygon fill="green" stroke="green" points="623.05,-687.59 616.7,-696.07 626.95,-693.4 623.05,-687.59"/>
</g>
<!-- response_dto -->
<g id="node17" class="node">
<title>response_dto</title>
<polygon fill="lightyellow" stroke="black" points="368.12,-566 240.38,-566 240.38,-523.5 368.12,-523.5 368.12,-566"/>
<text xml:space="preserve" text-anchor="middle" x="304.25" y="-548.7" font-family="Arial" font-size="14.00">📤 Response DTO</text>
<text xml:space="preserve" text-anchor="middle" x="304.25" y="-529.95" font-family="Arial" font-size="14.00">(JSON Response)</text>
</g>
<!-- mapper&#45;&gt;response_dto -->
<g id="edge18" class="edge">
<title>mapper&#45;&gt;response_dto</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M392.67,-617.3C376.68,-604.36 355.89,-587.54 338.5,-573.46"/>
<polygon fill="green" stroke="green" points="340.9,-570.91 330.93,-567.34 336.5,-576.35 340.9,-570.91"/>
</g>
<!-- response_dto&#45;&gt;subscription_handler -->
<g id="edge19" class="edge">
<title>response_dto&#45;&gt;subscription_handler</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M307.4,-566.21C309.99,-584.87 313.25,-613.22 313.25,-638 313.25,-893.25 313.25,-893.25 313.25,-893.25 313.25,-908.36 314.77,-925.04 316.49,-939.05"/>
<polygon fill="green" stroke="green" points="312.97,-939.13 317.75,-948.59 319.91,-938.21 312.97,-939.13"/>
</g>
<!-- app_error&#45;&gt;error_middleware -->
<g id="edge24" class="edge">
<title>app_error&#45;&gt;error_middleware</title>
<path fill="none" stroke="red" d="M474.5,-340.67C423.01,-328.32 348.79,-310.51 292.44,-296.99"/>
<polygon fill="red" stroke="red" points="293.43,-293.63 282.89,-294.7 291.8,-300.44 293.43,-293.63"/>
</g>
<!-- error_response&#45;&gt;client -->
<g id="edge26" class="edge">
<title>error_response&#45;&gt;client</title>
<path fill="none" stroke="red" d="M59.3,-218.84C55.99,-234.38 52.25,-256.28 52.25,-275.75 52.25,-1343.5 52.25,-1343.5 52.25,-1343.5 52.25,-1365.36 61.49,-1388.09 70.86,-1405.52"/>
<polygon fill="red" stroke="red" points="67.58,-1406.85 75.57,-1413.81 73.67,-1403.38 67.58,-1406.85"/>
<text xml:space="preserve" text-anchor="middle" x="118.25" y="-807.33" font-family="Arial" font-size="14.00">4xx/5xx + Error JSON</text>
</g>
</g>
</svg>
